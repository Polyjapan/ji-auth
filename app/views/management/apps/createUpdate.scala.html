@import data.UserSession
@import helper._
@import views.forms.FormFieldTemplate._

@(user: UserSession, userForm: Form[_], update: Option[Int] = None)(implicit request: RequestHeader, messagesProvider: MessagesProvider)

@title = @{
    if(update.isEmpty) {
        "Création d'application"
    } else {
        "Modification d'application"
    }
}

@button = @{
    if(update.isEmpty) {
        "Créer"
    } else {
        "Modifier"
    }
}

@target = @{
    if(update.isEmpty) {
        controllers.management.routes.AppsCRUDController.createApp()
    } else {
        controllers.management.routes.AppsCRUDController.updateApp(update.get)
    }
}

@views.html.management.managementTemplate(title, user) {
    <div class="row">
        <div class="col-lg-12">

            <h2>@title</h2>

            @if(userForm.hasGlobalErrors) {
                @error(userForm.globalErrors.map(_.format))
            }

            @form(action = target) {
                @CSRF.formField

                @inputText(userForm("name"), '_label -> "Nom", '_showConstraints -> false, 'class -> "form-control", 'required -> true, 'autofocus -> true, 'placeholder -> "Ma Super App")
                @inputText(userForm("redirect_url"), '_label -> "URL de retour", '_showConstraints -> false, 'class -> "form-control", 'required -> true, 'placeholder -> "https://super-app.com/callback")
                @inputText(userForm("email_callback_url"), '_label -> "URL de retour mail", '_showConstraints -> false, 'class -> "form-control", 'required -> true, 'placeholder -> "https://super-app.com/emailCallback")
                @inputText(userForm("recaptcha_private_key"), '_label -> "Clé privée ReCaptcha", '_showConstraints -> false, 'class -> "form-control", 'placeholder -> "(optionel) fKsK_219")

                <br>

                <button class="btn btn-lg btn-primary btn-block" type="submit">@button</button>
            }
        </div>
    </div>
}